[gd_scene load_steps=7 format=3 uid="uid://cshhyd2ev67x5"]

[ext_resource type="TileSet" uid="uid://g8i3wwwqvc50" path="res://dungeon1/intro_tileset.tres" id="1_6jcbo"]
[ext_resource type="Script" path="res://dungeon1/PoemRoom.gd" id="2_s7lo0"]
[ext_resource type="Texture2D" uid="uid://cxiuuki8craf" path="res://dungeon1/light_mask.png" id="3_jsv86"]
[ext_resource type="Texture2D" uid="uid://cvruot8ljkbm0" path="res://dungeon1/dungeon_tile.png" id="4_i8gl6"]
[ext_resource type="Script" path="res://Interactable.gd" id="5_x2n26"]
[ext_resource type="Script" path="res://Portal.gd" id="7_13qr2"]

[node name="CrateRoom" type="TileMap"]
tile_set = ExtResource("1_6jcbo")
format = 2
layer_0/name = "background"
layer_0/tile_data = PackedInt32Array(327679, 262144, 4, 262143, 327680, 4, 196607, 327680, 3, 131071, 262144, 5, 65535, 196608, 5, -1, 262144, 3, -65537, 262144, 4, 262144, 327680, 3, 196608, 196608, 3, 131072, 327680, 5, 65536, 196608, 5, 0, 196608, 3, -65536, 327680, 3, -131072, 196608, 3, 262145, 327680, 4, 196609, 327680, 5, 131073, 196608, 5, 65537, 262144, 3, 1, 196608, 5, -65535, 327680, 4, -131071, 196608, 5, -720897, 983040, 2, -655361, 983040, 2, -589825, 983040, 3, -524289, 327680, 3, -458753, 262144, 4, -786432, 1048576, 2, -720896, 1048576, 2, -655360, 1048576, 3, -589824, 262144, 5, -524288, 262144, 5, -786431, 1114112, 2, -720895, 1114112, 2, -655359, 1114112, 3, -589823, 327680, 5, -524287, 327680, 3, -1048577, 458752, 10, -983041, 196608, 12, -917505, 196608, 5, -851969, 983040, 1, -786433, 983040, 2, -1114112, 458752, 10, -1048576, 720896, 13, -983040, 262144, 5, -917504, 1048576, 1, -851968, 1048576, 2, -1114111, 458752, 10, -1048575, 196608, 12, -983039, 327680, 5, -917503, 1114112, 1, -851967, 1114112, 2, -327679, 196608, 3, -393215, 196608, 4, -458751, 196608, 5, -458752, 196608, 3, -393217, 196608, 5, -393218, 196608, 5, -458754, 196608, 4, -524290, 262144, 4, -589826, 196608, 4, -655362, 262144, 3, -720898, 327680, 3, -786434, 327680, 3, -851970, 196608, 5, -917506, 327680, 4, -983042, 327680, 5, -1048578, 262144, 5, -327682, 262144, 3, -262146, 327680, 5, -196610, 262144, 4, -131074, 327680, 5, -65538, 327680, 5, -2, 196608, 4, 65534, 196608, 5, 131070, 327680, 5, 196606, 196608, 5, 262142, 262144, 5, 327678, 327680, 3, 393214, 262144, 3, 393215, 262144, 5, 327680, 262144, 5, 327681, 327680, 5, 327682, 327680, 5, 262146, 196608, 4, 196610, 196608, 3, 131074, 262144, 5, 65538, 262144, 4, 2, 327680, 4, -65534, 262144, 4, -131070, 196608, 3, -262142, 327680, 5, -327678, 327680, 5, -393214, 327680, 4, -458750, 327680, 4, -524286, 262144, 5, -589822, 262144, 5, -655358, 327680, 3, -720894, 262144, 5, -786430, 327680, 5, -851966, 327680, 3, -917502, 196608, 4, -983038, 196608, 4, -1048574, 262144, 4, -1114110, 262144, 4, -262143, 262144, 5, -262144, 327680, 3, -327680, 196608, 3, -393216, 262144, 4, -327681, 327680, 4, -262145, 196608, 4, -196609, 262144, 5, -131073, 262144, 5, -196608, 262144, 5, -196607, 196608, 4)
layer_1/name = "objects"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array(131071, 720896, 6, 196607, 720896, 7, 131072, 720896, 7, 65536, 720896, 6, 131073, 720896, 7, 65537, 720896, 6, 131074, 786432, 7, -720896, 851968, 10, -655360, 786432, 11, -1048577, 786432, 8, -983041, 786432, 9, -917505, 720896, 15, -1048576, 786432, 14, -983040, 786432, 15, -917504, 786432, 11, -851968, 851968, 10, -786432, 851968, 10, -1114111, 786432, 8, -1048575, 786432, 9, -458751, 786432, 8, -393215, 786432, 9, -393217, 786432, 8, -327681, 786432, 9)
layer_2/name = "foreground"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 1
layer_2/tile_data = PackedInt32Array(393215, 458752, 19, 327681, 458752, 19, 327680, 786432, 13, 262142, 393216, 17, 196606, 393216, 17, 131070, 393216, 17, 65534, 393216, 17, -2, 393216, 17, -65538, 393216, 17, -131074, 393216, 17, -196610, 393216, 17, 196610, 393216, 17, 131074, 393216, 17, 65538, 393216, 17, 2, 393216, 17, -65534, 393216, 17, -131070, 393216, 17, -196606, 393216, 17, -262142, 393216, 17, 327679, 458752, 16, 262144, 458752, 16, 262145, 458752, 16, 262146, 524288, 12, 327678, 393216, 12, 393214, 196608, 19, 327682, 196608, 19, -262146, 393216, 11, -327682, 393216, 11, -393218, 393216, 11, -327678, 393216, 11, -393214, 393216, 11, -458750, 393216, 11, -1048578, 524288, 2, -983042, 524288, 3, -917506, 524288, 3, -851970, 524288, 3, -786434, 393216, 11, -1114110, 655360, 2, -1048574, 524288, 3, -983038, 524288, 3, -917502, 524288, 3, -851966, 393216, 11, -720898, 393216, 17, -655362, 393216, 17, -589826, 393216, 17, -524290, 393216, 17, -458754, 393216, 17, -786430, 393216, 17, -720894, 393216, 17, -655358, 393216, 17, -589822, 393216, 17, -524286, 393216, 17)
layer_3/name = "collision"
layer_3/enabled = false
layer_3/modulate = Color(1, 1, 1, 1)
layer_3/y_sort_enabled = false
layer_3/y_sort_origin = 0
layer_3/z_index = 0
layer_3/tile_data = PackedInt32Array(393214, 851968, 19, 393215, 851968, 19, 327680, 851968, 19, 327681, 851968, 19, 327682, 851968, 19, 262146, 851968, 19, 196610, 851968, 19, 131074, 851968, 19, 65538, 851968, 19, 2, 851968, 19, -65534, 851968, 19, -131070, 851968, 19, -196606, 851968, 19, -262142, 851968, 19, -327678, 851968, 19, -393214, 851968, 19, -458750, 851968, 19, -524286, 851968, 19, -589822, 851968, 19, -655358, 851968, 19, -720894, 851968, 19, -786430, 851968, 19, -851966, 851968, 19, -917502, 851968, 19, -983038, 851968, 19, -1048574, 851968, 19, -1114110, 851968, 19, 327678, 851968, 19, 262142, 851968, 19, 196606, 851968, 19, 131070, 851968, 19, 65534, 851968, 19, -2, 851968, 19, -65538, 851968, 19, -131074, 851968, 19, -196610, 851968, 19, -262146, 851968, 19, -327682, 851968, 19, -393218, 851968, 19, -458754, 851968, 19, -524290, 851968, 19, -589826, 851968, 19, -655362, 851968, 19, -720898, 851968, 19, -786434, 851968, 19, -851970, 851968, 19, -917506, 851968, 19, -983042, 851968, 19, -1048578, 851968, 19, -983041, 851968, 19, -1048575, 851968, 19, -1048577, 851968, 19, -1114112, 851968, 19, -1114111, 851968, 19, -393215, 851968, 19, -327681, 851968, 19, -655359, 851968, 19, -720895, 851968, 19, -786431, 851968, 19, -851967, 851968, 19, -917503, 851968, 19, -589825, 851968, 19, -655361, 851968, 19, -720897, 851968, 19, -786433, 851968, 19, -851969, 851968, 19)
script = ExtResource("2_s7lo0")

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
visible = false
color = Color(0, 0, 0, 1)
blend_mode = 2

[node name="PointLight2D" type="PointLight2D" parent="."]
visible = false
position = Vector2(12, -12)
scale = Vector2(4.16468, 3.73377)
color = Color(0.741176, 0.8, 1, 1)
blend_mode = 2
shadow_filter = 1
shadow_filter_smooth = 25.2
texture = ExtResource("3_jsv86")

[node name="Objects" type="Node2D" parent="."]

[node name="Chest" type="Sprite2D" parent="Objects"]
texture = ExtResource("4_i8gl6")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("5_x2n26")
one_shot = true
cell_position = Vector2i(0, -1)
interact_sprite = Rect2(145, 96, 17, 16)
interact_signal = "chestOpened"

[node name="Crate1" type="Sprite2D" parent="Objects"]
texture = ExtResource("4_i8gl6")
centered = false
region_enabled = true
region_rect = Rect2(175, 104, 19, 24)
script = ExtResource("5_x2n26")
one_shot = true
cell_position = Vector2i(-1, 2)

[node name="Crate2" type="Sprite2D" parent="Objects"]
texture = ExtResource("4_i8gl6")
centered = false
region_enabled = true
region_rect = Rect2(175, 104, 19, 24)
script = ExtResource("5_x2n26")
one_shot = true
cell_position = Vector2i(0, 2)

[node name="Crate3" type="Sprite2D" parent="Objects"]
texture = ExtResource("4_i8gl6")
centered = false
region_enabled = true
region_rect = Rect2(175, 104, 19, 24)
script = ExtResource("5_x2n26")
one_shot = true
cell_position = Vector2i(1, 2)

[node name="Portals" type="Node2D" parent="."]

[node name="Portal" type="Sprite2D" parent="Portals"]
texture = ExtResource("4_i8gl6")
centered = false
region_enabled = true
script = ExtResource("7_13qr2")
locked = true
cell_position = Vector2i(-1, 5)
trigger_cell = Vector2i(-1, 5)
next_map = "res://dungeon1/Lobby.tscn"
next_map_cell_position = Vector2i(-1, -5)
unlocked_sprite_region = Rect2(176, 208, 16, 16)
locked_sprite_region = Rect2(208, 208, 16, 16)
