[gd_scene load_steps=9 format=3 uid="uid://cmjljqfcx4gg4"]

[ext_resource type="TileSet" uid="uid://g8i3wwwqvc50" path="res://dungeon1/intro_tileset.tres" id="1_5qi4a"]
[ext_resource type="Script" path="res://dungeon1/PoemRoom.gd" id="2_11itm"]
[ext_resource type="Texture2D" uid="uid://cxiuuki8craf" path="res://dungeon1/light_mask.png" id="2_vv7fo"]
[ext_resource type="Texture2D" uid="uid://cvruot8ljkbm0" path="res://dungeon1/dungeon_tile.png" id="3_fdsqf"]
[ext_resource type="Script" path="res://Interactable.gd" id="4_5avbr"]
[ext_resource type="Script" path="res://Message.gd" id="6_b4r4n"]
[ext_resource type="Script" path="res://Portal.gd" id="7_teu2r"]

[sub_resource type="Resource" id="Resource_7o4og"]
script = ExtResource("6_b4r4n")
speaker = "Gatekeeper"
content = "What do you want?"
message_signal = ""
signal_timing = 0

[node name="PoemRoom" type="TileMap"]
tile_set = ExtResource("1_5qi4a")
format = 2
layer_0/name = "background"
layer_0/tile_data = PackedInt32Array(65532, 393216, 10, 131068, 393216, 11, 196604, 393216, 11, 262140, 393216, 11, 327676, 393216, 12, 393212, 524288, 13, 65533, 458752, 10, 131069, 458752, 11, 393213, 655360, 12, 393214, 655360, 12, 65536, 458752, 11, 327680, 655360, 12, 1, 458752, 10, 65537, 458752, 11, 327681, 655360, 12, 2, 524288, 10, 65538, 393216, 12, 131074, 458752, 11, 327682, 524288, 13, 65539, 458752, 12, 131075, 458752, 11, 327683, 458752, 11, 65540, 458752, 10, 131076, 458752, 11, 327684, 458752, 13, 65541, 458752, 10, 131077, 458752, 11, 327685, 458752, 13, -196610, 131072, 11, -131074, 131072, 12, -196609, 196608, 11, -131073, 917504, 3, -262144, 262144, 11, -196608, 262144, 12, -65537, 917504, 4, -262145, 196608, 17, 196605, 917504, 8, 196606, 1048576, 8, 196607, 327680, 3, 131072, 327680, 4, 131073, 196608, 5, 196609, 196608, 5, 196608, 327680, 3, 262143, 262144, 5, 262142, 327680, 5, 262141, 196608, 5, 196611, 196608, 3, 196612, 196608, 3, 196613, 196608, 5, 196610, 262144, 5, 131070, 1048576, 9, -393219, 917504, 6, -327682, 196608, 12, -393216, 196608, 12, -262146, 131072, 17, -327680, 262144, 17, -393218, 983040, 6, -393217, 983040, 6, -458752, 983040, 6, -65538, 196608, 5, -2, 196608, 5, -1, 327680, 3, -65536, 262144, 4, -131072, 262144, 4, -65535, 327680, 3, -131071, 327680, 5, -65534, 262144, 5, -131070, 327680, 4, 3, 196608, 4, -65533, 327680, 5, -131069, 196608, 5, 4, 196608, 3, -65532, 262144, 3, -131068, 262144, 5, 5, 196608, 5, -65531, 327680, 4, -131067, 262144, 3, -196607, 196608, 3, -262143, 262144, 4, -327679, 327680, 5, -196606, 196608, 4, -262142, 196608, 4, -327677, 196608, 3, -327676, 262144, 5, -327675, 327680, 5, -262139, 327680, 3, -196603, 196608, 4, -196604, 262144, 3, -196605, 196608, 5, -262141, 262144, 3, -262140, 262144, 3, -4, 327680, 5, -65540, 262144, 3, -5, 196608, 3, -65541, 196608, 5, -6, 196608, 4, -65542, 196608, 4, -262150, 196608, 3, -196614, 196608, 4, -131078, 196608, 5, -262149, 262144, 3, -196613, 262144, 4, -131077, 262144, 5, -262148, 327680, 3, -196612, 327680, 4, -131076, 327680, 5, -458746, 393216, 19, -393210, 393216, 20, -458745, 917504, 3, -393209, 917504, 4, -458744, 524288, 19, -393208, 524288, 20, -589817, 458752, 17, -524281, 458752, 18, -589816, 524288, 17, -524280, 524288, 18, 131078, 458752, 11, 196614, 262144, 3, 196615, 262144, 5, 131079, 196608, 3, 65543, 262144, 3, 7, 327680, 4, -65529, 196608, 4, -131065, 327680, 5, -196601, 327680, 3, -262137, 196608, 5, -327673, 196608, 5, -655353, 589824, 2, -655352, 655360, 2, 327686, 458752, 13, 327687, 458752, 13, 327688, 458752, 13, -524282, 458752, 18, -655354, 458752, 18, -524283, 458752, 18, -524284, 458752, 18, -524285, 458752, 18, -524286, 458752, 18, -524287, 458752, 18, -524288, 458752, 18, -458753, 458752, 18, -458754, 458752, 18, -458755, 458752, 18, -589818, 458752, 17, -589819, 458752, 17, -589820, 458752, 17, -589821, 458752, 17, -589822, 458752, 17, -589823, 458752, 17, -589824, 458752, 17, -524289, 458752, 17, -524290, 458752, 17, -524291, 458752, 17, -458747, 458752, 17, -458748, 458752, 17, -458749, 458752, 17, -458750, 458752, 17, -458751, 458752, 17, -393215, 327680, 5, -393214, 262144, 4, -393213, 327680, 4, -393212, 262144, 4, -393211, 262144, 4, -655355, 589824, 2, -655356, 589824, 2, -655357, 589824, 2, -655358, 589824, 2, -655359, 589824, 2, -655360, 589824, 2, -589825, 589824, 2, -589826, 589824, 2, -589827, 589824, 2, -458756, 589824, 2, -458757, 589824, 2, -458758, 589824, 2, -393220, 458752, 17, -393221, 458752, 17, -393222, 458752, 17, -393223, 458752, 17, -327687, 327680, 4, -327686, 262144, 5, -327685, 262144, 5, -327684, 262144, 4, -262151, 262144, 5, -196615, 196608, 3, -131079, 196608, 4, -65543, 262144, 3, -7, 196608, 3, -589828, 524288, 4, -524292, 458752, 11, -655363, 458752, 11, -655362, 458752, 11, -655361, 458752, 11, -720896, 458752, 11, -720894, 458752, 11, -720893, 458752, 11, -720892, 458752, 11, -720891, 458752, 11, -655364, 524288, 3, -720900, 524288, 2, -720899, 589824, 2, -720898, 589824, 2, -720897, 589824, 2, -786432, 589824, 2, -786431, 589824, 2, -786430, 589824, 2, -786429, 589824, 2, -786428, 589824, 2, -786427, 655360, 4, -851964, 458752, 11, -851965, 458752, 11, -851966, 458752, 11, -851967, 458752, 11, -851968, 458752, 11, -786433, 458752, 11, -786434, 458752, 11, -851963, 524288, 11, -917499, 524288, 10, -917500, 458752, 10, -917501, 458752, 10, -917502, 458752, 10, -917503, 458752, 10, -917504, 458752, 10, -851969, 458752, 10, -851970, 458752, 10, -720895, 458752, 11, -851971, 262144, 5, -851972, 262144, 5, -851973, 262144, 5, -786435, 458752, 11, -786436, 458752, 11, -786437, 458752, 11, -851974, 196608, 10, -786438, 262144, 11, -851975, 196608, 10, -786439, 196608, 11, -720905, 917504, 3, -655369, 917504, 4, -851976, 196608, 10, -786440, 196608, 11, -851977, 131072, 10, -786441, 131072, 11, -720902, 458752, 11, -720903, 458752, 11, -720904, 458752, 11, -655368, 458752, 11, -655367, 458752, 11, -655366, 458752, 11, -720901, 458752, 11, -589833, 262144, 5, -524297, 327680, 3, -458761, 327680, 5, -393225, 196608, 5, -327689, 327680, 5, -262153, 262144, 3, -262152, 262144, 5, -327688, 262144, 3, -393224, 327680, 4, -458760, 262144, 4, -524296, 262144, 3, -589832, 262144, 4, -655365, 458752, 11, -524298, 1114112, 2, -589834, 1114112, 2, -655370, 1114112, 2, -720906, 1114112, 2, -786442, 1114112, 2, -851978, 1114112, 2, -524299, 1048576, 2, -524300, 1048576, 2, -524301, 1048576, 2, -524302, 1048576, 2, -589838, 1048576, 2, -655374, 1048576, 2, -720910, 1048576, 2, -786446, 1048576, 2, -786445, 1048576, 2, -851981, 1048576, 2, -851980, 1048576, 2, -851979, 1048576, 2, -786443, 1048576, 2, -720907, 1048576, 2, -655371, 1048576, 2, -589835, 1048576, 2, -589836, 1048576, 2, -589837, 1048576, 2, -655373, 1048576, 2, -720909, 1048576, 2, -720908, 1048576, 2, -786444, 1048576, 2, -655372, 1048576, 2, -851982, 1048576, 2, -917518, 1048576, 1, -917517, 1048576, 1, -917516, 1048576, 1, -917515, 1048576, 1, -983046, 1245184, 12, -983047, 1245184, 12, -983048, 1245184, 12, -983049, 1245184, 12, -983045, 1048576, 2, -983044, 1048576, 2, -983043, 1114112, 2, -1048579, 1114112, 1, -1048580, 1048576, 1, -1048581, 983040, 1, -983050, 917504, 6, -917514, 1048576, 2, -917519, 983040, 1, -851983, 983040, 2, -786447, 983040, 2, -720911, 983040, 2, -655375, 983040, 2, -589839, 983040, 2, -524303, 983040, 2, -458767, 983040, 3, -393226, 262144, 5, -393227, 196608, 4, -393228, 196608, 3, -393229, 196608, 5, -393230, 327680, 4, -262159, 458752, 11, -262158, 458752, 11, -262157, 458752, 11, -262156, 458752, 11, -262155, 458752, 11, -131082, 458752, 11, -131081, 458752, 11, 131064, 458752, 11, 131065, 458752, 11, 131066, 458752, 11, 131067, 458752, 11, -917513, 1114112, 1, 131071, 262144, 3, 65535, 262144, 3, -327678, 262144, 4, -458759, 65536, 14, -524295, 196608, 12, -524294, 196608, 12, -524293, 196608, 12, -589831, 196608, 11, -589830, 196608, 11, -589829, 196608, 11, -917510, 458752, 13, -917511, 458752, 13, -917512, 458752, 13, 65534, 131072, 14, 0, 65536, 14, 393215, 851968, 13)
layer_1/name = "objects"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array(-196608, 786432, 8, -131072, 786432, 9, -131074, 786432, 8, -65538, 786432, 9, -393211, 393216, 20, -393212, 393216, 20, -393213, 393216, 20, -393214, 393216, 20, -393215, 393216, 20, -524292, 655360, 7, -262143, 851968, 7, -327679, 851968, 7, -458760, 851968, 7, -327684, 327680, 9, -327685, 327680, 9, -327686, 327680, 9, -327687, 327680, 9, -589829, 851968, 10, -589832, 327680, 9, -589831, 327680, 9, -589830, 327680, 9)
layer_2/name = "foreground"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 1
layer_2/tile_data = PackedInt32Array(327677, 458752, 10, 327678, 458752, 10, 262144, 458752, 10, 262145, 458752, 10, 262146, 458752, 10, 262147, 458752, 10, 262148, 1048576, 7, 262149, 458752, 10, -3, 917504, 7, -65539, 917504, 7, 65542, 655360, 4, 6, 655360, 3, -65530, 655360, 3, -131066, 655360, 3, -196602, 655360, 3, -262138, 655360, 3, 131069, 1245184, 11, 65533, 917504, 7, -131075, 917504, 7, -196611, 917504, 7, -262147, 917504, 7, -327683, 917504, 7, -327674, 524288, 3, -393210, 655360, 10, -393208, 655360, 10, 262150, 458752, 12, 262151, 458752, 12, 262152, 524288, 12, 196616, 524288, 11, 131080, 524288, 11, 65544, 524288, 11, 8, 524288, 11, -65528, 524288, 11, -131064, 524288, 11, -196600, 524288, 11, -262136, 524288, 11, -327672, 524288, 11, -458751, 1245184, 12, -458750, 983040, 6, -458749, 1245184, 12, -458748, 1048576, 6, -393212, 1048576, 7, -327676, 1048576, 7, -262140, 1048576, 7, -196604, 1048576, 7, -131068, 1048576, 7, -65532, 1048576, 7, 4, 1048576, 7, 65540, 1048576, 7, 131076, 1048576, 7, 196612, 1048576, 7, 327684, 1048576, 7, 393220, 1048576, 7, 458756, 1048576, 7, 524292, 1048576, 7, 589828, 1048576, 7, 655364, 1048576, 7, 720900, 1048576, 7, -851971, 1245184, 11, -851972, 1245184, 11, -851973, 1245184, 11, -393218, 1245184, 12, -393226, 1245184, 11, -393227, 1245184, 11, -393228, 1245184, 11, -393229, 1245184, 11, -393230, 1245184, 11, -917514, 1245184, 11, -8, 524288, 11, -65544, 524288, 11, -131080, 524288, 11, -196616, 524288, 10, -196617, 458752, 10, -262154, 524288, 11, -196618, 393216, 12, -327690, 524288, 10, -327691, 458752, 10, -327692, 458752, 10, -327693, 458752, 10, -327694, 458752, 10, -327695, 393216, 12, -393231, 524288, 6, 65528, 393216, 12, 65529, 458752, 10, 65530, 458752, 10, 65531, 196608, 8, 327679, 458752, 10, -917509, 1245184, 10, -917508, 1245184, 10, -917507, 1245184, 10, -458766, 1048576, 2, -458765, 1048576, 2, -458764, 1048576, 2, -458763, 1048576, 2, -458762, 1114112, 2)
layer_3/name = "collision"
layer_3/enabled = false
layer_3/modulate = Color(1, 1, 1, 1)
layer_3/y_sort_enabled = false
layer_3/y_sort_origin = 0
layer_3/z_index = 0
layer_3/tile_data = PackedInt32Array(393212, 851968, 19, 393213, 851968, 19, 393214, 851968, 19, 327680, 851968, 19, 327681, 851968, 19, 327682, 851968, 19, 327683, 851968, 19, 327684, 851968, 19, 327685, 851968, 19, 327686, 851968, 19, 327687, 851968, 19, 327688, 851968, 19, 262152, 851968, 19, 196616, 851968, 19, 131080, 851968, 19, 65544, 851968, 19, 8, 851968, 19, -65528, 851968, 19, -131064, 851968, 19, -196600, 851968, 19, -262136, 851968, 19, -327672, 851968, 19, -393208, 851968, 19, -458744, 851968, 19, 327676, 851968, 19, 262140, 851968, 19, 196604, 851968, 19, 131068, 851968, 19, 131069, 851968, 19, 131070, 851968, 19, 196605, 851968, 19, 196606, 851968, 19, 65536, 851968, 19, 65537, 851968, 19, 131074, 851968, 19, 131075, 851968, 19, 131076, 851968, 19, 131077, 851968, 19, 131078, 851968, 19, 65542, 851968, 19, 6, 851968, 19, -65530, 851968, 19, -131066, 851968, 19, -196602, 851968, 19, -262138, 851968, 19, -327674, 851968, 19, -393210, 851968, 19, -458746, 851968, 19, -458747, 851968, 19, -458748, 851968, 19, -458749, 851968, 19, -458750, 851968, 19, -458751, 851968, 19, -458752, 851968, 19, -393217, 851968, 19, -393218, 851968, 19, -393219, 851968, 19, -393220, 851968, 19, -393221, 851968, 19, -393222, 851968, 19, -393223, 851968, 19, -524292, 851968, 19, -524291, 851968, 19, -524290, 851968, 19, -524289, 851968, 19, -589824, 851968, 19, -589823, 851968, 19, -589822, 851968, 19, -589821, 851968, 19, -589820, 851968, 19, -589819, 851968, 19, -589818, 851968, 19, -589817, 851968, 19, -524279, 851968, 19, -589815, 851968, 19, -655351, 851968, 19, -720890, 851968, 19, -720889, 851968, 19, -720888, 851968, 19, -720887, 851968, 19, -458743, 851968, 19, -589829, 851968, 19, -655368, 851968, 19, -655367, 851968, 19, -655366, 851968, 19, -655365, 851968, 19, -720904, 851968, 19, -720903, 851968, 19, -720902, 851968, 19, -720901, 851968, 19, -786437, 851968, 19, -786436, 851968, 19, -786435, 851968, 19, -786434, 851968, 19, -786433, 851968, 19, -851968, 851968, 19, -851967, 851968, 19, -851966, 851968, 19, -851965, 851968, 19, -851964, 851968, 19, -655363, 851968, 19, -655362, 851968, 19, -655361, 851968, 19, -720896, 851968, 19, -720895, 851968, 19, -720894, 851968, 19, -720893, 851968, 19, -720892, 851968, 19, -720891, 851968, 19, -917505, 851968, 19, -983040, 851968, 19, -983039, 851968, 19, -983038, 851968, 19, -983037, 851968, 19, -983036, 851968, 19, -983035, 851968, 19, -917506, 851968, 19, -983034, 851968, 19, -917498, 851968, 19, -851962, 851968, 19, -786426, 851968, 19, -917507, 851968, 19, -917508, 851968, 19, -917509, 851968, 19, -917510, 851968, 19, -917511, 851968, 19, -917512, 851968, 19, -917513, 851968, 19, -917514, 851968, 19, -851978, 851968, 19, -786442, 851968, 19, -720906, 851968, 19, -655370, 851968, 19, -589834, 851968, 19, -524298, 851968, 19, -458762, 851968, 19, -524293, 851968, 19, -458767, 851968, 19, -458766, 851968, 19, -458765, 851968, 19, -458764, 851968, 19, -458763, 851968, 19, -393231, 851968, 19, -327695, 851968, 19, -262159, 851968, 19, -262158, 851968, 19, -262157, 851968, 19, -262156, 851968, 19, -262155, 851968, 19, -196619, 851968, 19, -131083, 851968, 19, -131082, 851968, 19, -131081, 851968, 19, -65545, 851968, 19, -9, 851968, 19, 65527, 851968, 19, 131063, 851968, 19, 131064, 851968, 19, 131065, 851968, 19, 131066, 851968, 19, 131067, 851968, 19, -131074, 851968, 19, -196608, 851968, 19, -196611, 851968, 19, -262147, 851968, 19, -327683, 851968, 19, -327682, 851968, 19, -393216, 851968, 19, -327694, 851968, 19, -327693, 851968, 19, -327692, 851968, 19, -327691, 851968, 19, -327690, 851968, 19, -262154, 851968, 19, -196618, 851968, 19, -196617, 851968, 19, -196616, 851968, 19, -131080, 851968, 19, -65544, 851968, 19, -8, 851968, 19, 65528, 851968, 19, 65529, 851968, 19, 65531, 851968, 19, 65532, 851968, 19, 65533, 851968, 19, 65534, 851968, 19, 0, 851968, 19, 1, 851968, 19, 2, 851968, 19, 65538, 851968, 19, 65539, 851968, 19, -131072, 851968, 19, -65538, 851968, 19, -262143, 851968, 19, -327679, 851968, 19, -524294, 851968, 19, -524295, 851968, 19, -458760, 851968, 19, 65541, 851968, 19, 65540, 851968, 19, 65530, 851968, 19, 393215, 851968, 19)
script = ExtResource("2_11itm")

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
visible = false
color = Color(0, 0, 0, 1)
blend_mode = 2

[node name="PointLight2D" type="PointLight2D" parent="."]
visible = false
position = Vector2(-6, -80)
scale = Vector2(4.16468, 3.73377)
color = Color(0.741176, 0.8, 1, 1)
blend_mode = 2
shadow_filter = 1
shadow_filter_smooth = 25.2
texture = ExtResource("2_vv7fo")

[node name="Objects" type="Node2D" parent="."]

[node name="Chest" type="Sprite2D" parent="Objects"]
position = Vector2(-128, -224)
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("4_5avbr")
one_shot = true
cell_position = Vector2i(-8, -14)
interact_sprite = Rect2(145, 96, 17, 16)
interact_signal = "chestOpened"

[node name="Chest2" type="Sprite2D" parent="Objects"]
position = Vector2(48, -80)
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("4_5avbr")
one_shot = true
cell_position = Vector2i(3, -5)
interact_sprite = Rect2(145, 96, 17, 16)
interact_signal = "chestOpened"

[node name="Chest3" type="Sprite2D" parent="Objects"]
position = Vector2(-112, -128)
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("4_5avbr")
one_shot = true
cell_position = Vector2i(-7, -8)
interact_sprite = Rect2(145, 96, 17, 16)
interact_signal = "chestOpened"

[node name="Chest4" type="Sprite2D" parent="Objects"]
position = Vector2(-224, -112)
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("4_5avbr")
one_shot = true
cell_position = Vector2i(-14, -7)
interact_sprite = Rect2(145, 96, 17, 16)
interact_signal = "chestOpened"

[node name="Gatekeeper" type="Sprite2D" parent="Objects"]
position = Vector2(-16, -64)
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
region_rect = Rect2(256, 236, 17, 20)
script = ExtResource("4_5avbr")
cell_position = Vector2i(-1, -4)
interact_sprite = Rect2(256, 236, 17, 20)
interact_signal = "talkedToGatekeeper"
messages = Array[Resource]([SubResource("Resource_7o4og")])

[node name="Portals" type="Node2D" parent="."]

[node name="Portal" type="Sprite2D" parent="Portals"]
texture = ExtResource("3_fdsqf")
centered = false
region_enabled = true
script = ExtResource("7_teu2r")
cell_position = Vector2i(-1, -6)
trigger_cell = Vector2i(-1, -6)
next_map = "res://dungeon1/CrateRoom.tscn"
next_map_cell_position = Vector2i(0, 4)
unlocked_sprite_region = Rect2(176, 208, 16, 16)
locked_sprite_region = Rect2(208, 208, 16, 16)
