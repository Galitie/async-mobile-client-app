[gd_scene load_steps=11 format=3 uid="uid://dc7xbqpdknuxo"]

[ext_resource type="TileSet" uid="uid://g8i3wwwqvc50" path="res://dungeon1/intro_tileset.tres" id="1_6v0yu"]
[ext_resource type="Script" path="res://dungeon1/Lobby.gd" id="2_daw8g"]
[ext_resource type="Texture2D" uid="uid://cxiuuki8craf" path="res://dungeon1/light_mask.png" id="2_wsmvx"]
[ext_resource type="Texture2D" uid="uid://cvruot8ljkbm0" path="res://dungeon1/dungeon_tile.png" id="3_jvo88"]
[ext_resource type="Script" path="res://Interactable.gd" id="4_bgr3q"]
[ext_resource type="Script" path="res://Portal.gd" id="6_cwvc8"]
[ext_resource type="Script" path="res://Message.gd" id="6_svky4"]

[sub_resource type="Resource" id="Resource_aigs6"]
script = ExtResource("6_svky4")
speaker = ""
content = "You find something old and worthless..."
message_signal = ""
signal_timing = 0

[sub_resource type="Resource" id="Resource_qka3c"]
script = ExtResource("6_svky4")
speaker = ""
content = "Perfect!"
message_signal = ""
signal_timing = 0

[sub_resource type="Resource" id="Resource_hkmet"]
script = ExtResource("6_svky4")
speaker = ""
content = "Got a [color=yellow]rusty hilt."
message_signal = ""
signal_timing = 0

[node name="Lobby" type="TileMap"]
tile_set = ExtResource("1_6v0yu")
format = 2
layer_0/name = "background"
layer_0/tile_data = PackedInt32Array(-1, 262144, 4, 65535, 262144, 4, 131071, 262144, 4, 196607, 262144, 4, 262143, 196608, 3, -65537, 262144, 4, -131073, 262144, 4, -196609, 262144, 4, 327679, 983040, 8, -262145, 983040, 6, 458751, 458752, 13, -393224, 458752, 10, -327688, 458752, 11, -262152, 917504, 6, -196616, 917504, 7, -131080, 917504, 7, -65544, 917504, 7, -8, 917504, 7, 65528, 917504, 7, 131064, 917504, 7, 196600, 917504, 7, 262136, 917504, 7, 327672, 917504, 8, 458744, 458752, 13, -393223, 458752, 10, -327687, 1114112, 9, -262151, 983040, 6, -196615, 262144, 4, -131079, 262144, 4, -65543, 262144, 4, -7, 196608, 3, 65529, 196608, 3, 131065, 196608, 3, 196601, 196608, 3, 262137, 262144, 4, 327673, 983040, 8, 458745, 458752, 13, -393222, 458752, 10, -327686, 458752, 11, -262150, 983040, 6, -65542, 196608, 4, -6, 196608, 3, 65530, 262144, 4, 131066, 262144, 4, 327674, 983040, 8, 458746, 458752, 13, -393221, 458752, 10, -327685, 458752, 11, -262149, 983040, 6, -196613, 262144, 4, -131077, 720896, 4, -65541, 327680, 3, -5, 262144, 3, 65531, 262144, 4, 131067, 262144, 4, 196603, 720896, 4, 262139, 196608, 3, 327675, 983040, 8, 458747, 458752, 13, -393220, 458752, 10, -327684, 458752, 11, -262148, 983040, 6, -196612, 262144, 4, -131076, 262144, 4, -65540, 262144, 4, -4, 196608, 3, 65532, 262144, 4, 131068, 262144, 4, 196604, 327680, 3, 262140, 196608, 3, 327676, 983040, 8, 458748, 458752, 13, -393219, 458752, 10, -327683, 458752, 11, -262147, 983040, 6, -196611, 262144, 4, -131075, 262144, 4, -65539, 262144, 4, -3, 262144, 4, 65533, 262144, 4, 131069, 196608, 3, 196605, 262144, 4, 262141, 196608, 3, 327677, 983040, 8, 458749, 458752, 13, -393225, 393216, 10, 393207, 393216, 12, 458743, 393216, 13, -393218, 458752, 10, -327682, 458752, 11, -262146, 983040, 6, -196610, 262144, 4, -131074, 262144, 4, -65538, 262144, 4, -2, 262144, 4, 65534, 262144, 4, 131070, 196608, 3, 196606, 262144, 4, 262142, 196608, 3, 327678, 983040, 8, 458750, 458752, 13, -196614, 327680, 4, -131078, 327680, 4, 196602, 327680, 4, 262138, 327680, 4, -458751, 458752, 10, -393215, 458752, 11, -327679, 983040, 6, -262143, 262144, 4, -196607, 327680, 3, -131071, 262144, 4, -65535, 262144, 4, 1, 262144, 4, 65537, 262144, 4, 131073, 262144, 4, 196609, 196608, 3, 262145, 983040, 8, 393217, 458752, 13, -458750, 458752, 10, -393214, 458752, 11, -327678, 983040, 6, -262142, 262144, 4, -196606, 262144, 4, -131070, 262144, 4, -65534, 262144, 4, 2, 262144, 4, 65538, 262144, 4, 131074, 262144, 4, 196610, 196608, 3, 262146, 983040, 8, 393218, 458752, 13, -458749, 458752, 10, -393213, 458752, 11, -327677, 983040, 6, -262141, 196608, 3, -196605, 262144, 4, -131069, 262144, 3, -65533, 262144, 4, 3, 196608, 3, 65539, 196608, 3, 131075, 196608, 3, 196611, 196608, 3, 262147, 983040, 8, 393219, 458752, 13, -458748, 458752, 10, -393212, 458752, 11, -327676, 983040, 6, -262140, 327680, 4, -196604, 327680, 4, -131068, 262144, 4, -65532, 262144, 4, 4, 262144, 4, 65540, 262144, 4, 131076, 327680, 4, 196612, 327680, 3, 262148, 983040, 8, 393220, 458752, 13, -458747, 458752, 10, -393211, 1114112, 9, -327675, 983040, 6, -262139, 262144, 4, -196603, 720896, 4, -131067, 262144, 4, -65531, 262144, 4, 5, 262144, 4, 65541, 262144, 4, 131077, 720896, 4, 196613, 262144, 4, 262149, 983040, 8, 393221, 458752, 13, -458746, 458752, 10, -393210, 458752, 11, -327674, 1048576, 6, -262138, 1048576, 7, -196602, 1048576, 7, -131066, 1048576, 7, -65530, 1048576, 7, 6, 1048576, 7, 65542, 1048576, 7, 131078, 1048576, 7, 196614, 1048576, 7, 262150, 1048576, 8, 393222, 458752, 13, -458745, 524288, 10, 393223, 524288, 13, -458752, 458752, 10, -393216, 458752, 11, -327680, 983040, 6, -262144, 196608, 3, -196608, 262144, 4, -131072, 262144, 4, -65536, 262144, 4, 0, 262144, 4, 65536, 262144, 4, 131072, 262144, 4, 196608, 196608, 3, 262144, 983040, 8, 393216, 458752, 13, 327687, 524288, 12, -393217, 458752, 10)
layer_1/name = "objects"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array(-65542, 851968, 10, -131079, 851968, 10, 262139, 851968, 7, 196601, 851968, 7, 131067, 720896, 7, 131068, 786432, 7, -262145, 786432, 11, 196602, 262144, 15, 131076, 262144, 15, -196604, 262144, 15, -131078, 262144, 15)
layer_2/name = "foreground"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 1
layer_2/tile_data = PackedInt32Array(131066, 262144, 14, -196614, 262144, 14, -262140, 262144, 14, 65540, 262144, 14, 65531, 720896, 6, -327689, 393216, 11, -262153, 393216, 11, -196617, 393216, 11, -131081, 393216, 11, -65545, 393216, 11, -9, 393216, 11, 65527, 393216, 11, 131063, 393216, 11, 196599, 393216, 11, 262135, 393216, 11, 327671, 393216, 11, 262151, 393216, 11, 196615, 393216, 11, 131079, 393216, 11, 65543, 393216, 11, 7, 393216, 11, -65529, 393216, 11, -131065, 393216, 11, -196601, 393216, 11, -262137, 393216, 11, -327673, 393216, 11, -393209, 393216, 11, 327686, 458752, 12, 327685, 458752, 12, 327684, 458752, 12, 327683, 458752, 12, 327682, 458752, 12, 327681, 458752, 12, 327680, 458752, 12, 393215, 458752, 12, 393214, 458752, 12, 393213, 458752, 12, 393212, 458752, 12, 393211, 458752, 12, 393210, 458752, 12, 393209, 458752, 12, 393208, 458752, 12)
layer_3/name = "collision"
layer_3/enabled = false
layer_3/modulate = Color(1, 1, 1, 1)
layer_3/y_sort_enabled = false
layer_3/y_sort_origin = 0
layer_3/z_index = 0
layer_3/tile_data = PackedInt32Array(196602, 851968, 19, 131076, 851968, 19, 131067, 851968, 19, 327672, 851968, 19, 327673, 851968, 19, 327674, 851968, 19, 327675, 851968, 19, 327676, 851968, 19, 327677, 851968, 19, 327678, 851968, 19, 327679, 851968, 19, 262144, 851968, 19, 262145, 851968, 19, 262146, 851968, 19, 262147, 851968, 19, 262148, 851968, 19, 262149, 851968, 19, 196614, 851968, 19, 262150, 851968, 19, 131078, 851968, 19, 65542, 851968, 19, 6, 851968, 19, -65530, 851968, 19, -131066, 851968, 19, -196602, 851968, 19, -262138, 851968, 19, -327674, 851968, 19, -327675, 851968, 19, -327676, 851968, 19, -327677, 851968, 19, -327678, 851968, 19, -327679, 851968, 19, -327680, 851968, 19, -262146, 851968, 19, -262147, 851968, 19, -262148, 851968, 19, -262149, 851968, 19, -262150, 851968, 19, -262151, 851968, 19, -262152, 851968, 19, -196616, 851968, 19, -131080, 851968, 19, -65544, 851968, 19, -8, 851968, 19, 65528, 851968, 19, 131064, 851968, 19, 196600, 851968, 19, 262136, 851968, 19, 196601, 851968, 19, 262139, 851968, 19, -65542, 851968, 19, -131079, 851968, 19, -196604, 851968, 19, -131078, 851968, 19)
script = ExtResource("2_daw8g")

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
color = Color(0, 0, 0, 1)
blend_mode = 2

[node name="PointLight2D" type="PointLight2D" parent="."]
position = Vector2(-6, -80)
scale = Vector2(4.16468, 3.73377)
color = Color(0.741176, 0.8, 1, 1)
blend_mode = 2
shadow_filter = 1
shadow_filter_smooth = 25.2
texture = ExtResource("2_wsmvx")

[node name="Objects" type="Node2D" parent="."]

[node name="Chest" type="Sprite2D" parent="Objects"]
texture = ExtResource("3_jvo88")
centered = false
region_enabled = true
region_rect = Rect2(145, 112, 17, 16)
script = ExtResource("4_bgr3q")
one_shot = true
cell_position = Vector2i(4, -2)
interact_sprite = Rect2(145, 96, 17, 16)
messages = Array[Resource]([SubResource("Resource_aigs6"), SubResource("Resource_qka3c"), SubResource("Resource_hkmet")])

[node name="Portals" type="Node2D" parent="."]

[node name="OutsideDoor" type="Sprite2D" parent="Portals"]
texture = ExtResource("3_jvo88")
centered = false
region_enabled = true
script = ExtResource("6_cwvc8")
cell_position = Vector2i(-1, -6)
trigger_cell = Vector2i(-1, -6)
next_map = "res://dungeon1/CrateRoom2.tscn"
next_map_cell_position = Vector2i(0, -6)
unlocked_sprite_region = Rect2(176, 208, 16, 16)
locked_sprite_region = Rect2(208, 208, 16, 16)
